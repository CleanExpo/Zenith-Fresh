"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{7648:function(e,t,a){a.d(t,{default:function(){return s.a}});var r=a(2972),s=a.n(r)},9376:function(e,t,a){var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},4602:function(e,t,a){a.d(t,{b:function(){return n}});var r=a(7437),s=a(2265),i=a(6334),l=a(9356);function n(e){let{onFileSelect:t,allowMultiple:a=!1,acceptedTypes:n=["image/*","video/*","audio/*",".pdf",".doc",".docx"],maxFileSize:d=10,showPreview:o=!0}=e,[c,u]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[h,x]=(0,s.useState)({}),[g,f]=(0,s.useState)("all"),[y,b]=(0,s.useState)("date"),[v,j]=(0,s.useState)("grid"),[D,N]=(0,s.useState)(!1),w=(0,s.useRef)(null),k=(0,s.useRef)(null),C=(0,l.p)(),z=[{id:"img-1",name:"hero-banner.jpg",type:"image",size:2456e3,url:"/api/media/hero-banner.jpg",thumbnail:"/api/media/thumb/hero-banner.jpg",uploadedAt:"2024-01-15T14:30:00Z",uploadedBy:{id:"john-doe",name:"John Doe",avatar:"\uD83D\uDC68‍\uD83D\uDCBC"},tags:["hero","banner","homepage"],alt:"Hero banner for homepage",dimensions:{width:1920,height:1080}},{id:"video-1",name:"product-demo.mp4",type:"video",size:1568e4,url:"/api/media/product-demo.mp4",thumbnail:"/api/media/thumb/product-demo.jpg",uploadedAt:"2024-01-14T10:15:00Z",uploadedBy:{id:"jane-smith",name:"Jane Smith",avatar:"\uD83D\uDC69‍\uD83D\uDCBB"},tags:["demo","product","video"],dimensions:{width:1280,height:720}},{id:"doc-1",name:"brand-guidelines.pdf",type:"document",size:324e4,url:"/api/media/brand-guidelines.pdf",uploadedAt:"2024-01-13T16:45:00Z",uploadedBy:{id:"mike-johnson",name:"Mike Johnson",avatar:"✍️"},tags:["brand","guidelines","pdf"]},{id:"audio-1",name:"background-music.mp3",type:"audio",size:512e4,url:"/api/media/background-music.mp3",uploadedAt:"2024-01-12T09:20:00Z",uploadedBy:{id:"sarah-wilson",name:"Sarah Wilson",avatar:"\uD83C\uDFB5"},tags:["music","background","audio"]}];(0,s.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/upload?folder=media&limit=50");if(t.ok){var e;let a=await t.json();if(a.success&&(null===(e=a.data)||void 0===e?void 0:e.files)){let e=a.data.files.map(e=>{var t,a,r;return{id:e.id,name:e.name,type:e.type.startsWith("image/")?"image":e.type.startsWith("video/")?"video":e.type.startsWith("audio/")?"audio":"application/pdf"===e.type||e.name.endsWith(".doc")||e.name.endsWith(".docx")?"document":"other",size:e.size,url:e.url,thumbnail:e.url,uploadedAt:e.uploadedAt,uploadedBy:{id:(null===(t=e.metadata)||void 0===t?void 0:t.uploadedBy)||"unknown",name:(null===(a=e.metadata)||void 0===a?void 0:a.userEmail)||"Unknown User",avatar:"\uD83D\uDC64"},tags:(null===(r=e.metadata)||void 0===r?void 0:r.tags)||[]}});u([...z,...e])}}}catch(e){console.error("Failed to load files:",e),u(z)}})()},[]);let S=[...c.filter(e=>"all"===g||e.type===g)].sort((e,t)=>{switch(y){case"name":return e.name.localeCompare(t.name);case"size":return t.size-e.size;case"type":return e.type.localeCompare(t.type);default:return new Date(t.uploadedAt).getTime()-new Date(e.uploadedAt).getTime()}}),B=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):"".concat((e/1048576).toFixed(1)," MB"),A=e=>{switch(e){case"image":return"\uD83D\uDDBC️";case"video":return"\uD83C\uDFA5";case"audio":return"\uD83C\uDFB5";case"document":return"\uD83D\uDCC4";default:return"\uD83D\uDCC1"}},P=e=>{switch(e){case"image":return"bg-blue-100 text-blue-800";case"video":return"bg-purple-100 text-purple-800";case"audio":return"bg-green-100 text-green-800";case"document":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},W=(0,s.useCallback)(e=>{e.preventDefault(),U(Array.from(e.dataTransfer.files))},[]),E=(0,s.useCallback)(e=>{e.preventDefault()},[]),U=async e=>{for(let a of(N(!0),e)){if(a.size>1048576*d){C.error("File too large","".concat(a.name," exceeds ").concat(d,"MB limit"));continue}if(!n.some(e=>e.includes("/*")?a.type.startsWith(e.replace("/*","/")):a.name.toLowerCase().endsWith(e.toLowerCase()))){C.error("File type not supported","".concat(a.name," is not an accepted file type"));continue}let e="upload-".concat(Date.now(),"-").concat(Math.random());x(t=>({...t,[e]:0}));try{var t;let e=new FormData;e.append("file",a),e.append("folder","media"),e.append("metadata",JSON.stringify({tags:[],alt:"",description:""}));let r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok){let e=await r.json();throw Error(e.error||"Upload failed")}let s=await r.json();if(!s.success)throw Error(s.error||"Upload failed");let i=s.data,l={id:i.id,name:i.name,type:a.type.startsWith("image/")?"image":a.type.startsWith("video/")?"video":a.type.startsWith("audio/")?"audio":"application/pdf"===a.type||a.name.endsWith(".doc")||a.name.endsWith(".docx")?"document":"other",size:i.size,url:i.url,thumbnail:i.url,uploadedAt:i.uploadedAt,uploadedBy:{id:"current-user",name:"You",avatar:"\uD83D\uDC64"},tags:(null===(t=i.metadata)||void 0===t?void 0:t.tags)||[]};u(e=>[l,...e]),C.success("Upload complete","".concat(a.name," uploaded successfully"))}catch(e){console.error("Upload error:",e),C.error("Upload failed",e instanceof Error?e.message:"Unknown error occurred")}finally{x(t=>{let{[e]:a,...r}=t;return r})}}N(!1)},F=e=>{a?p(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id]):(p([e.id]),null==t||t(e))},T=async e=>{let t=c.find(t=>t.id===e);if(t)try{if(!t.id.startsWith("img-")&&!t.id.startsWith("video-")&&!t.id.startsWith("doc-")&&!t.id.startsWith("audio-")){let e=await fetch("/api/upload?filePath=".concat(encodeURIComponent(t.id)),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Delete failed")}}u(t=>t.filter(t=>t.id!==e)),p(t=>t.filter(t=>t!==e)),C.success("File deleted","File removed from media library")}catch(e){console.error("Delete error:",e),C.error("Delete failed",e instanceof Error?e.message:"Unknown error occurred")}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Media Library"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Upload and manage your media files"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>j("grid"===v?"list":"grid"),children:["grid"===v?"\uD83D\uDCCB":"⊞"," ","grid"===v?"List":"Grid"]}),(0,r.jsx)(i.z,{size:"sm",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:"\uD83D\uDCE4 Upload Files"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,r.jsx)("div",{className:"flex space-x-1",children:[{key:"all",label:"All",count:c.length},{key:"image",label:"Images",count:c.filter(e=>"image"===e.type).length},{key:"video",label:"Videos",count:c.filter(e=>"video"===e.type).length},{key:"audio",label:"Audio",count:c.filter(e=>"audio"===e.type).length},{key:"document",label:"Documents",count:c.filter(e=>"document"===e.type).length}].map(e=>(0,r.jsxs)("button",{onClick:()=>f(e.key),className:"px-3 py-1 text-sm rounded-md ".concat(g===e.key?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:[e.label," (",e.count,")"]},e.key))}),(0,r.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,r.jsx)("option",{value:"date",children:"Sort by Date"}),(0,r.jsx)("option",{value:"name",children:"Sort by Name"}),(0,r.jsx)("option",{value:"size",children:"Sort by Size"}),(0,r.jsx)("option",{value:"type",children:"Sort by Type"})]})]})]}),(0,r.jsxs)("div",{ref:k,onDrop:W,onDragOver:E,className:"p-6 border-b border-gray-200 border-dashed border-gray-300 bg-gray-50 text-center",children:[(0,r.jsx)("input",{ref:w,type:"file",multiple:a,accept:n.join(","),onChange:e=>{U(Array.from(e.target.files||[]))},className:"hidden"}),(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCE4"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:["Drag and drop files here, or"," ",(0,r.jsx)("button",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"text-blue-600 hover:text-blue-700 underline",children:"browse"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Supports: ",n.join(", ")," • Max ",d,"MB per file"]}),Object.keys(h).length>0&&(0,r.jsx)("div",{className:"mt-4 space-y-2",children:Object.entries(h).map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"bg-white rounded p-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,r.jsx)("span",{children:"Uploading..."}),(0,r.jsxs)("span",{children:[a,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(a,"%")}})})]},t)})})]}),(0,r.jsx)("div",{className:"p-4",children:0===S.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC1"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No files found"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"all"===g?"Upload your first file to get started":"No ".concat(g," files found")})]}):(0,r.jsx)(r.Fragment,{children:"grid"===v?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:S.map(e=>(0,r.jsxs)("div",{onClick:()=>F(e),className:"relative group cursor-pointer rounded-lg border-2 transition-all duration-200 ".concat(m.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"),children:[(0,r.jsxs)("div",{className:"aspect-square relative overflow-hidden rounded-t-lg",children:["image"===e.type&&e.thumbnail?(0,r.jsx)("img",{src:e.thumbnail,alt:e.alt||e.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,r.jsx)("span",{className:"text-4xl",children:A(e.type)})}),m.includes(e.id)&&(0,r.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm",children:"✓"})}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),window.open(e.url,"_blank")},className:"p-2 bg-white text-gray-700 rounded-full hover:bg-gray-100",title:"Preview",children:"\uD83D\uDC41️"}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation();let a=document.createElement("a");a.href=e.url,a.download=e.name,a.click()},className:"p-2 bg-white text-gray-700 rounded-full hover:bg-gray-100",title:"Download",children:"⬇️"}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id)},className:"p-2 bg-white text-red-600 rounded-full hover:bg-red-50",title:"Delete",children:"\uD83D\uDDD1️"})]})]}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate mb-1",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full ".concat(P(e.type)),children:e.type}),(0,r.jsx)("span",{children:B(e.size)})]}),e.dimensions&&(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.dimensions.width," \xd7 ",e.dimensions.height]})]})]},e.id))}):(0,r.jsx)("div",{className:"space-y-1",children:S.map(e=>(0,r.jsxs)("div",{onClick:()=>F(e),className:"flex items-center space-x-4 p-3 rounded-lg cursor-pointer transition-colors ".concat(m.includes(e.id)?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,r.jsx)("div",{className:"w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100",children:"image"===e.type&&e.thumbnail?(0,r.jsx)("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-lg",children:A(e.type)})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(P(e.type)),children:e.type}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:B(e.size)}),e.dimensions&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[e.dimensions.width," \xd7 ",e.dimensions.height]})]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 hidden md:block",children:e.uploadedBy.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500 hidden lg:block",children:new Date(e.uploadedAt).toLocaleDateString()}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),window.open(e.url,"_blank")},className:"p-1 text-gray-400 hover:text-gray-600",title:"Preview",children:"\uD83D\uDC41️"}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),T(e.id)},className:"p-1 text-gray-400 hover:text-red-600",title:"Delete",children:"\uD83D\uDDD1️"})]})]},e.id))})})}),m.length>0&&(0,r.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[m.length," file",1!==m.length?"s":""," selected"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>p([]),children:"Clear Selection"}),a&&t&&(0,r.jsx)(i.z,{size:"sm",onClick:()=>{c.filter(e=>m.includes(e.id)).forEach(t)},children:"Use Selected"})]})]})})]})}},1994:function(e,t,a){a.d(t,{W:function(){return r}});function r(){for(var e,t,a=0,r="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(a=0;a<i;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r)}return s}(e))&&(r&&(r+=" "),r+=t);return r}}}]);