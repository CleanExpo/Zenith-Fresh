"use strict";exports.id=1342,exports.ids=[1342],exports.modules={71342:(e,t,a)=>{a.d(t,{e:()=>d});var r=a(10326),s=a(17577),l=a(99837),n=a(20603),i=a(50080);function d({projectId:e,pageId:t,initialData:a,onSave:d,onCancel:o}){let[c,x]=(0,s.useState)(a?.title||""),[u,m]=(0,s.useState)(a?.slug||""),[g,p]=(0,s.useState)(()=>{if(a?.content)try{return Array.isArray(a.content)?a.content:[{id:"block-1",type:"paragraph",content:""}]}catch{}return[{id:"block-1",type:"paragraph",content:""}]}),[h,b]=(0,s.useState)(a?.metaTitle||""),[y,v]=(0,s.useState)(a?.metaDescription||""),[j,f]=(0,s.useState)(a?.keywords||[]),[N,w]=(0,s.useState)(a?.published||!1),[C,k]=(0,s.useState)(!1),[S,P]=(0,s.useState)(!1),[E,T]=(0,s.useState)(!1),[$,D]=(0,s.useState)(null),[q,z]=(0,s.useState)(!1),H=(0,n.p)(),I=(0,s.useRef)(null),L=()=>`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,M=(e,t)=>{let a={id:L(),type:e,content:"",metadata:"heading"===e?{level:2}:void 0};if(t){let e=g.findIndex(e=>e.id===t),r=[...g];r.splice(e+1,0,a),p(r)}else p([...g,a]);D(a.id)},A=(e,t)=>{p(g.map(a=>a.id===e?{...a,...t}:a))},F=e=>{if(1===g.length){A(e,{content:""});return}let t=g.findIndex(t=>t.id===e),a=g.filter(t=>t.id!==e);p(a),t>0?D(a[t-1].id):a.length>0&&D(a[0].id)},O=(e,t)=>{let a=g.findIndex(t=>t.id===e);if("up"===t&&0===a||"down"===t&&a===g.length-1)return;let r=[...g],s="up"===t?a-1:a+1;[r[a],r[s]]=[r[s],r[a]],p(r)},B=async()=>{if(!c.trim()){H.error("Validation Error","Page title is required");return}if(!u.trim()){H.error("Validation Error","Page slug is required");return}k(!0);try{let a={title:c.trim(),slug:u.trim(),content:g,metaTitle:h.trim()||void 0,metaDescription:y.trim()||void 0,keywords:j.filter(e=>e.trim()),published:N},r=t?`/api/projects/${e}/pages/${t}`:`/api/projects/${e}/pages`,s=await fetch(r,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await s.json();if(!s.ok)throw Error(l.error||"Failed to save page");H.success("Success",t?"Page updated successfully":"Page created successfully"),d?.(l.data)}catch(e){console.error("Save error:",e),H.error("Save failed",e instanceof Error?e.message:"Unknown error occurred")}finally{k(!1)}},U=e=>{e.trim()&&!j.includes(e.trim())&&f([...j,e.trim()])},K=e=>{f(j.filter((t,a)=>a!==e))};return(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 p-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("h2",{className:"text-lg font-medium",children:t?"Edit Page":"Create New Page"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>z(!q),className:`px-3 py-1 text-sm rounded ${q?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:q?"✏️ Edit":"\uD83D\uDC41️ Preview"}),r.jsx("button",{onClick:()=>P(!S),className:`px-3 py-1 text-sm rounded ${S?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:"SEO"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:N,onChange:e=>w(e.target.checked),className:"rounded"}),r.jsx("span",{className:"text-sm",children:"Published"})]}),o&&r.jsx(l.z,{variant:"outline",onClick:o,children:"Cancel"}),r.jsx(l.z,{onClick:B,disabled:C,children:C?"Saving...":"Save Page"})]})]}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 p-4 space-y-3",children:[r.jsx("input",{type:"text",value:c,onChange:e=>x(e.target.value),placeholder:"Page title",className:"w-full text-2xl font-bold border-none outline-none"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"URL:"}),(0,r.jsxs)("span",{className:"text-sm text-gray-400",children:["/",e,"/"]}),r.jsx("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"page-slug",className:"text-sm border-b border-gray-300 outline-none focus:border-blue-500"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:q?r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"prose max-w-none",children:[r.jsx("h1",{children:c}),g.map(e=>{switch(e.type){case"heading":let t=`h${e.metadata?.level||2}`;return r.jsx(t,{children:e.content},e.id);case"paragraph":return r.jsx("p",{children:e.content},e.id);case"image":return(0,r.jsxs)("figure",{children:[e.metadata?.src&&r.jsx("img",{src:e.metadata.src,alt:e.metadata.alt||e.content}),e.content&&r.jsx("figcaption",{children:e.content})]},e.id);case"list":let a=e.metadata?.listType==="ordered"?"ol":"ul",s=e.content.split("\n").filter(e=>e.trim());return r.jsx(a,{children:s.map((e,t)=>r.jsx("li",{children:e.replace(/^[•\-\*]\s*/,"").replace(/^\d+\.\s*/,"")},t))},e.id);case"quote":return r.jsx("blockquote",{children:e.content},e.id);case"code":return r.jsx("pre",{children:r.jsx("code",{className:e.metadata?.language?`language-${e.metadata.language}`:"",children:e.content})},e.id);case"divider":return r.jsx("hr",{},e.id);default:return null}})]})}):(0,r.jsxs)("div",{ref:I,className:"max-w-4xl mx-auto",children:[g.map(e=>{let t=$===e.id;return(0,r.jsxs)("div",{className:`relative group border rounded-lg p-3 mb-2 transition-all ${t?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>D(e.id),children:[(0,r.jsxs)("div",{className:`absolute -left-2 top-2 flex flex-col space-y-1 opacity-0 group-hover:opacity-100 transition-opacity ${t?"opacity-100":""}`,children:[r.jsx("button",{onClick:t=>{t.stopPropagation(),O(e.id,"up")},className:"w-6 h-6 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center justify-center",title:"Move up",children:"↑"}),r.jsx("button",{onClick:t=>{t.stopPropagation(),O(e.id,"down")},className:"w-6 h-6 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center justify-center",title:"Move down",children:"↓"}),r.jsx("button",{onClick:t=>{t.stopPropagation(),F(e.id)},className:"w-6 h-6 bg-red-100 hover:bg-red-200 text-red-600 rounded text-xs flex items-center justify-center",title:"Delete block",children:"\xd7"})]}),"heading"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("select",{value:e.metadata?.level||2,onChange:t=>A(e.id,{metadata:{...e.metadata,level:parseInt(t.target.value)}}),className:"text-sm border rounded px-2 py-1",children:[r.jsx("option",{value:1,children:"H1"}),r.jsx("option",{value:2,children:"H2"}),r.jsx("option",{value:3,children:"H3"}),r.jsx("option",{value:4,children:"H4"}),r.jsx("option",{value:5,children:"H5"}),r.jsx("option",{value:6,children:"H6"})]})}),r.jsx("input",{type:"text",value:e.content,onChange:t=>A(e.id,{content:t.target.value}),placeholder:"Enter heading text...",className:`w-full border-none outline-none bg-transparent font-bold ${e.metadata?.level===1?"text-3xl":e.metadata?.level===2?"text-2xl":e.metadata?.level===3?"text-xl":e.metadata?.level===4?"text-lg":"text-base"}`})]}),"paragraph"===e.type&&r.jsx("textarea",{value:e.content,onChange:t=>A(e.id,{content:t.target.value}),placeholder:"Start writing...",className:"w-full border-none outline-none bg-transparent resize-none min-h-[60px]",style:{overflow:"hidden"},onInput:e=>{let t=e.target;t.style.height="auto",t.style.height=`${t.scrollHeight}px`}}),"image"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[e.metadata?.src?(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:e.metadata.src,alt:e.metadata.alt||e.content,className:"max-w-full h-auto rounded"}),r.jsx("button",{onClick:()=>A(e.id,{metadata:{...e.metadata,src:void 0}}),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"\xd7"})]}):r.jsx("button",{onClick:()=>{D(e.id),T(!0)},className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-500 hover:border-gray-400",children:"\uD83D\uDCF7 Click to add image"}),r.jsx("input",{type:"text",value:e.content,onChange:t=>A(e.id,{content:t.target.value}),placeholder:"Image caption (optional)",className:"w-full border-none outline-none bg-transparent text-sm text-gray-600"})]}),"list"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("select",{value:e.metadata?.listType||"unordered",onChange:t=>A(e.id,{metadata:{...e.metadata,listType:t.target.value}}),className:"text-sm border rounded px-2 py-1",children:[r.jsx("option",{value:"unordered",children:"Bullet List"}),r.jsx("option",{value:"ordered",children:"Numbered List"})]})}),r.jsx("textarea",{value:e.content,onChange:t=>A(e.id,{content:t.target.value}),placeholder:"• List item 1 • List item 2 • List item 3",className:"w-full border-none outline-none bg-transparent resize-none min-h-[80px]"})]}),"quote"===e.type&&r.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-4",children:r.jsx("textarea",{value:e.content,onChange:t=>A(e.id,{content:t.target.value}),placeholder:"Enter quote text...",className:"w-full border-none outline-none bg-transparent resize-none min-h-[60px] italic"})}),"code"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:e.metadata?.language||"",onChange:t=>A(e.id,{metadata:{...e.metadata,language:t.target.value}}),placeholder:"Language (optional)",className:"text-sm border rounded px-2 py-1"}),r.jsx("textarea",{value:e.content,onChange:t=>A(e.id,{content:t.target.value}),placeholder:"Enter code...",className:"w-full border-none outline-none bg-gray-100 font-mono text-sm p-2 rounded resize-none min-h-[120px]"})]}),"divider"===e.type&&r.jsx("hr",{className:"border-gray-300"}),t&&(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[r.jsx("button",{onClick:()=>M("paragraph",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ Text"}),r.jsx("button",{onClick:()=>M("heading",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ Heading"}),r.jsx("button",{onClick:()=>M("image",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ Image"}),r.jsx("button",{onClick:()=>M("list",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ List"}),r.jsx("button",{onClick:()=>M("quote",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ Quote"}),r.jsx("button",{onClick:()=>M("code",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ Code"}),r.jsx("button",{onClick:()=>M("divider",e.id),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"+ Divider"})]})]},e.id)}),0===g.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"Start writing your page content"}),r.jsx(l.z,{onClick:()=>M("paragraph"),className:"mt-2",children:"Add First Block"})]})]})})]}),S&&(0,r.jsxs)("div",{className:"w-80 border-l border-gray-200 p-4 overflow-y-auto",children:[r.jsx("h3",{className:"font-medium mb-4",children:"SEO Settings"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Title"}),r.jsx("input",{type:"text",value:h,onChange:e=>b(e.target.value),placeholder:"Custom title for search engines",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[h.length,"/60 characters"]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),r.jsx("textarea",{value:y,onChange:e=>v(e.target.value),placeholder:"Brief description for search results",rows:3,className:"w-full border border-gray-300 rounded px-3 py-2 text-sm"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[y.length,"/160 characters"]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keywords"}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",placeholder:"Add keyword and press Enter",className:"w-full border border-gray-300 rounded px-3 py-2 text-sm",onKeyPress:e=>{"Enter"===e.key&&(U(e.currentTarget.value),e.currentTarget.value="")}}),r.jsx("div",{className:"flex flex-wrap gap-1",children:j.map((e,t)=>(0,r.jsxs)("span",{className:"inline-flex items-center bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:[e,r.jsx("button",{onClick:()=>K(t),className:"ml-1 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))})]})]})]})]})]}),E&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Select Image"}),r.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx(i.b,{onFileSelect:e=>{$&&A($,{type:"image",content:e.alt||e.name,metadata:{src:e.url,alt:e.alt||e.name}}),T(!1)},allowMultiple:!1,acceptedTypes:["image/*"],showPreview:!0})})]})})]})}}};