"use strict";(()=>{var e={};e.id=5975,e.ids=[5975],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},16153:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>x,patchFetch:()=>j,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>y,staticGenerationAsyncStorage:()=>b});var n={};s.r(n),s.d(n,{DELETE:()=>m,GET:()=>g,POST:()=>l});var r=s(49303),a=s(88716),i=s(60670),o=s(87070),u=s(75571),p=s(95456),d=s(18603);class c{static{this.runningJobs=new Map}static async orchestrate(e){let t=`job_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s={id:t,projectId:e.projectId,action:e.action,target:e.target,status:"running",steps:this.generateSteps(e.action,e.options),startTime:new Date().toISOString(),artifacts:{}};return this.runningJobs.set(t,s),this.executeSteps(t,s.steps,e).catch(e=>{console.error(`Orchestration ${t} failed:`,e);let s=this.runningJobs.get(t);s&&(s.status="failed",s.endTime=new Date().toISOString())}),s}static getJob(e){return this.runningJobs.get(e)}static getAllJobs(){return Array.from(this.runningJobs.values())}static cancelJob(e){let t=this.runningJobs.get(e);return!!t&&"running"===t.status&&(t.status="cancelled",t.endTime=new Date().toISOString(),!0)}static generateSteps(e,t){let s=[];switch(e){case"build":s.push({id:"validate",name:"Validate Project Configuration",status:"pending"},{id:"install",name:"Install Dependencies",status:"pending"},{id:"compile",name:"Compile Source Code",status:"pending"},{id:"bundle",name:"Bundle Assets",status:"pending"},{id:"optimize",name:"Optimize Build",status:"pending"}),t?.skipTests||s.push({id:"test",name:"Run Tests",status:"pending"}),s.push({id:"package",name:"Package Build",status:"pending"});break;case"deploy":s.push({id:"prebuild",name:"Pre-deployment Checks",status:"pending"},{id:"build",name:"Build Application",status:"pending"},{id:"upload",name:"Upload to CDN",status:"pending"},{id:"configure",name:"Configure Environment",status:"pending"},{id:"deploy",name:"Deploy to Server",status:"pending"},{id:"healthcheck",name:"Health Check",status:"pending"}),t?.skipTests||s.push({id:"smoketest",name:"Smoke Tests",status:"pending"}),s.push({id:"cleanup",name:"Clean Up",status:"pending"});break;case"test":s.push({id:"setup",name:"Setup Test Environment",status:"pending"},{id:"unit",name:"Unit Tests",status:"pending"},{id:"integration",name:"Integration Tests",status:"pending"},{id:"e2e",name:"End-to-End Tests",status:"pending"},{id:"coverage",name:"Generate Coverage Report",status:"pending"},{id:"report",name:"Generate Test Report",status:"pending"});break;case"analyze":s.push({id:"scan",name:"Code Quality Scan",status:"pending"},{id:"security",name:"Security Analysis",status:"pending"},{id:"performance",name:"Performance Analysis",status:"pending"},{id:"dependencies",name:"Dependency Check",status:"pending"},{id:"report",name:"Generate Analysis Report",status:"pending"});break;case"optimize":s.push({id:"analyze",name:"Analyze Current State",status:"pending"},{id:"compress",name:"Compress Assets",status:"pending"},{id:"minify",name:"Minify Code",status:"pending"},{id:"cache",name:"Optimize Caching",status:"pending"},{id:"cdn",name:"CDN Configuration",status:"pending"},{id:"validate",name:"Validate Optimizations",status:"pending"});break;case"backup":s.push({id:"prepare",name:"Prepare Backup",status:"pending"},{id:"database",name:"Backup Database",status:"pending"},{id:"files",name:"Backup Files",status:"pending"},{id:"config",name:"Backup Configuration",status:"pending"},{id:"compress",name:"Compress Backup",status:"pending"},{id:"upload",name:"Upload to Storage",status:"pending"},{id:"verify",name:"Verify Backup",status:"pending"})}return s}static async executeSteps(e,t,s){let n=this.runningJobs.get(e);if(n){for(let e of t){if("cancelled"===n.status)break;e.status="running",e.startTime=new Date().toISOString(),e.logs=[`Starting ${e.name}...`];let t=3e3*Math.random()+1e3;if(await new Promise(e=>setTimeout(e,t)),Math.random()>.1)e.status="completed",e.logs.push(`${e.name} completed successfully`),e.metadata=this.generateStepMetadata(e.id,s.action);else{e.status="failed",e.error=`${e.name} failed: Simulated error for demo purposes`,e.logs.push(`Error: ${e.error}`),n.status="failed";break}e.endTime=new Date().toISOString(),e.duration=Math.round(t)}"running"===n.status&&(n.status="completed",n.artifacts=this.generateArtifacts(s.action,s.target)),n.endTime=new Date().toISOString(),n.totalDuration=Math.round(new Date(n.endTime).getTime()-new Date(n.startTime).getTime()),n.summary={totalSteps:t.length,completedSteps:t.filter(e=>"completed"===e.status).length,failedSteps:t.filter(e=>"failed"===e.status).length,skippedSteps:t.filter(e=>"skipped"===e.status).length}}}static generateStepMetadata(e,t){let s={};switch(e){case"test":s.testsRun=Math.floor(50*Math.random())+10,s.testsPassed=s.testsRun-Math.floor(3*Math.random()),s.coverage=Math.floor(20*Math.random())+80;break;case"build":case"compile":s.bundleSize=`${(5*Math.random()+1).toFixed(1)}MB`,s.filesProcessed=Math.floor(100*Math.random())+50;break;case"deploy":s.deploymentId=`dep_${Math.random().toString(36).substr(2,9)}`,s.region="us-east-1";break;case"scan":s.issuesFound=Math.floor(10*Math.random()),s.securityScore=Math.floor(20*Math.random())+80}return s}static generateArtifacts(e,t){let s={};switch(e){case"build":s.buildUrl=`https://builds.example.com/build_${Date.now()}`;break;case"deploy":s.deploymentUrl="production"===t?"https://myproject.com":`https://${t}.myproject.com`;break;case"test":s.reportUrl=`https://reports.example.com/test_${Date.now()}`;break;case"analyze":s.reportUrl=`https://reports.example.com/analysis_${Date.now()}`}return s.logUrl=`https://logs.example.com/job_${Date.now()}`,s}}async function l(e){try{if(!await (0,u.getServerSession)(p.Lz))return o.NextResponse.json({error:"Authentication required"},{status:401});let t=await e.json(),s=d.uT.safeParse(t);if(!s.success)return o.NextResponse.json({error:"Invalid request data",details:s.error.errors.map(e=>({field:e.path.join("."),message:e.message}))},{status:400});let{projectId:n,action:r,target:a,options:i}=s.data;if("deploy"===r&&!a)return o.NextResponse.json({error:"Deploy action requires a target environment"},{status:400});let l=await c.orchestrate({projectId:n,action:r,target:a,options:i});return o.NextResponse.json({success:!0,data:l})}catch(e){return console.error("Orchestration error:",e),o.NextResponse.json({error:"Orchestration failed",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function g(e){try{if(!await (0,u.getServerSession)(p.Lz))return o.NextResponse.json({error:"Authentication required"},{status:401});let{searchParams:t}=new URL(e.url),s=t.get("jobId");if(s){let e=c.getJob(s);if(!e)return o.NextResponse.json({error:"Job not found"},{status:404});return o.NextResponse.json({success:!0,data:e})}{let e=c.getAllJobs();return o.NextResponse.json({success:!0,data:{jobs:e,total:e.length,running:e.filter(e=>"running"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,failed:e.filter(e=>"failed"===e.status).length}})}}catch(e){return console.error("Error fetching orchestration data:",e),o.NextResponse.json({error:"Failed to fetch orchestration data"},{status:500})}}async function m(e){try{if(!await (0,u.getServerSession)(p.Lz))return o.NextResponse.json({error:"Authentication required"},{status:401});let{searchParams:t}=new URL(e.url),s=t.get("jobId");if(!s)return o.NextResponse.json({error:"Job ID is required"},{status:400});if(!c.cancelJob(s))return o.NextResponse.json({error:"Job not found or cannot be cancelled"},{status:404});return o.NextResponse.json({success:!0,message:"Job cancelled successfully"})}catch(e){return console.error("Error cancelling job:",e),o.NextResponse.json({error:"Failed to cancel job"},{status:500})}}let f=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/orchestrate/route",pathname:"/api/orchestrate",filename:"route",bundlePath:"app/api/orchestrate/route"},resolvedPagePath:"/root/Zenith-Fresh/src/app/api/orchestrate/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:b,serverHooks:y}=f,x="/api/orchestrate/route";function j(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:b})}},69955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75571:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var r=s(69955);Object.keys(r).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=i(void 0);if(s&&s.has(e))return s.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}(s(45609));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(i=function(e){return e?s:t})(e)}Object.keys(a).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[9276,9848,7070,5609,9133,4991,5385],()=>s(16153));module.exports=n})();