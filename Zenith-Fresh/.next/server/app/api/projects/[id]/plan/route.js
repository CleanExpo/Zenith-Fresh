"use strict";(()=>{var e={};e.id=2696,e.ids=[2696],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},36914:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>j,routeModule:()=>f,serverHooks:()=>y,staticGenerationAsyncStorage:()=>x});var n={};r.r(n),r.d(n,{GET:()=>m,POST:()=>g,PUT:()=>h});var s=r(49303),o=r(88716),i=r(60670),a=r(87070),u=r(75571),p=r(95456),l=r(75748),d=r(18603);let c=async(e,t)=>{let{goals:r,timeline:n,features:s,technologies:o=[],budget:i,priority:a,notes:u}=t,p=s.map((e,t)=>({id:`milestone-${t+1}`,title:`Implement ${e}`,description:`Complete development and testing of ${e} functionality`,dueDate:new Date(Date.now()+(t+1)*6048e5).toISOString(),status:"pending",dependencies:t>0?[`milestone-${t}`]:[]}));p.push({id:`milestone-${p.length+1}`,title:"Project Launch",description:"Deploy to production and go live",dueDate:new Date(Date.now()+(p.length+1)*6048e5).toISOString(),status:"pending",dependencies:[`milestone-${p.length}`]});let l=20*s.length,d=o.length>3?1.5:1.2,c="high"===a&&s.length>5?"high":s.length>3||o.length>4?"medium":"low",g=[];s.length>5&&g.push("Complex feature set"),o.length>4&&g.push("Multiple technology dependencies"),"high"===a&&g.push("Tight timeline requirements"),i&&i<1e4&&g.push("Limited budget constraints");let m=[];return"high"===c&&(m.push("Break down complex features into smaller tasks"),m.push("Implement regular checkpoint reviews"),m.push("Consider MVP approach for initial release")),o.length>4&&(m.push("Conduct technology proof-of-concepts early"),m.push("Allocate time for integration testing")),{id:`plan-${Date.now()}`,projectId:e,goals:r,timeline:n,features:s,technologies:o,budget:i,priority:a,notes:u,milestones:p,estimatedHours:Math.round(l*d*("high"===a?1.3:"medium"===a?1.1:1)),riskAssessment:{level:c,factors:g,mitigations:m},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}};async function g(e,{params:t}){try{let r=await (0,u.getServerSession)(p.Lz);if(!r)return a.NextResponse.json({error:"Authentication required"},{status:401});let n=t.id,s=await e.json(),o=d.aq.safeParse(s);if(!o.success)return a.NextResponse.json({error:"Invalid request data",details:o.error.errors.map(e=>({field:e.path.join("."),message:e.message}))},{status:400});let{goals:i,timeline:g,features:m,technologies:h,budget:f,priority:j,notes:x}=o.data,y=await l.db.project.findUnique({where:{id:n}});if(!y)return a.NextResponse.json({error:"Project not found"},{status:404});if(y.userId!==r.user.id)return a.NextResponse.json({error:"Access denied"},{status:403});let w=await c(n,{goals:i,timeline:g,features:m,technologies:h,budget:f,priority:j,notes:x});return a.NextResponse.json({success:!0,data:w})}catch(e){return console.error("Plan creation error:",e),a.NextResponse.json({error:"Failed to create project plan",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function m(e,{params:t}){try{let e=await (0,u.getServerSession)(p.Lz);if(!e)return a.NextResponse.json({error:"Authentication required"},{status:401});let r=t.id,n=await l.db.project.findUnique({where:{id:r}});if(!n)return a.NextResponse.json({error:"Project not found"},{status:404});if(n.userId!==e.user.id)return a.NextResponse.json({error:"Access denied"},{status:403});let s={id:`plan-${r}`,projectId:r,goals:["Create a modern, responsive website","Implement user authentication","Add content management system"],timeline:"8 weeks",features:["User Registration/Login","Content Management","Responsive Design","SEO Optimization","Analytics Integration"],technologies:["Next.js","TypeScript","Tailwind CSS","Prisma","PostgreSQL"],budget:15e3,priority:"high",notes:"Focus on user experience and performance optimization",milestones:[{id:"milestone-1",title:"Setup and Authentication",description:"Project setup and user authentication implementation",dueDate:new Date(Date.now()+6048e5).toISOString(),status:"completed",dependencies:[]},{id:"milestone-2",title:"Core Features",description:"Implement main application features",dueDate:new Date(Date.now()+18144e5).toISOString(),status:"in_progress",dependencies:["milestone-1"]},{id:"milestone-3",title:"UI/UX Polish",description:"Design refinement and user experience optimization",dueDate:new Date(Date.now()+3024e6).toISOString(),status:"pending",dependencies:["milestone-2"]},{id:"milestone-4",title:"Testing & Launch",description:"Comprehensive testing and production deployment",dueDate:new Date(Date.now()+42336e5).toISOString(),status:"pending",dependencies:["milestone-3"]}],estimatedHours:320,riskAssessment:{level:"medium",factors:["Complex feature integration","Multiple technology dependencies","Tight timeline requirements"],mitigations:["Regular milestone reviews","Early technology validation","Phased delivery approach"]},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a.NextResponse.json({success:!0,data:s})}catch(e){return console.error("Error fetching project plan:",e),a.NextResponse.json({error:"Failed to fetch project plan"},{status:500})}}async function h(e,{params:t}){try{let r=await (0,u.getServerSession)(p.Lz);if(!r)return a.NextResponse.json({error:"Authentication required"},{status:401});let n=t.id;await e.json();let s=await l.db.project.findUnique({where:{id:n}});if(!s)return a.NextResponse.json({error:"Project not found"},{status:404});if(s.userId!==r.user.id)return a.NextResponse.json({error:"Access denied"},{status:403});return a.NextResponse.json({success:!0,message:"Project plan updated successfully"})}catch(e){return console.error("Plan update error:",e),a.NextResponse.json({error:"Failed to update project plan"},{status:500})}}let f=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/projects/[id]/plan/route",pathname:"/api/projects/[id]/plan",filename:"route",bundlePath:"app/api/projects/[id]/plan/route"},resolvedPagePath:"/root/Zenith-Fresh/src/app/api/projects/[id]/plan/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:j,staticGenerationAsyncStorage:x,serverHooks:y}=f,w="/api/projects/[id]/plan/route";function v(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:x})}},69955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75571:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var s=r(69955);Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(45609));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}Object.keys(o).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[9276,9848,7070,5609,9133,4991,5385],()=>r(36914));module.exports=n})();